[
  {
    "objectID": "Maps_and_Figures.html",
    "href": "Maps_and_Figures.html",
    "title": "BBECA Work",
    "section": "",
    "text": "import geopandas as gpd\nimport matplotlib.pyplot as plt\nimport contextily as cx\nimport matplotlib.patches as mpatches\nimport matplotlib.gridspec as gridspec\nfrom MapTools_py import map_elements as mel\n\n\nBBECA = gpd.read_file('BB_Data/Spatial/ECOSYS_REV_TEM.shp')\nBBECA = BBECA[['PRISTINE', 'ECO', 'MAP_UNIT', 'geometry']]\n\nPS = 'Pine\\nSphagnum'\nBS = 'Pine\\nSphagnum'\nFR = 'Forested'\nDS = 'Disturbed'\nWA = 'Water'\n\nClasses = {\n    'Water Lily - Watersh':WA,\n    'Herb. veg on dist. p':DS,\n    'Open Water':WA,\n    'Cultivated Field':DS,\n    'Disturbed Surface':DS,\n    'Hardhack Thicket':FR,\n    'Birch Forest':FR,\n    'Mixed Conifer Forest':FR,\n    'Pine-Salal Forest':FR,\n    'Pine Sphagnum Woodla':PS,\n    'Beakrush - Three-way':BS,\n    'Pine Sphagnum Tall S':PS,\n    'Beakrush - Sphagnum':BS,\n    'Pine Sphagnum Low Sh':PS,\n}\n\nColors ={\n    PS:'#76bd68',#light green\n    BS:'#0eb0a5',#dark teal\n    FR:'#193d02',#dark green\n    DS:'#f2ef8a',#light yellow\n    WA:'#053ba8'#dark blue\n}\n\nBBECA['Class'] = BBECA['MAP_UNIT']\nBBECA['Class'] = BBECA['Class'].replace(Classes)\n\nBBECA.loc[BBECA['Class']=='Other','MAP_UNIT']='Other'\n\nBBECA['AREA_sqKM']=BBECA.area.values/1e6\n\nBoundary = BBECA[['geometry']].dissolve().explode(index_parts=True)\nBoundary = Boundary.loc[Boundary.area>= 1e6].to_crs('WGS1984')\nBoundary.to_file('BB_Data/Spatial/BBECA_Boundary.geojson',driver='GeoJSON')\n\nTowers = gpd.read_file('BB_Data/Spatial/Towers.shp')\nTowers.loc[Towers['Name']=='Sapling_NoTreatment','Name']='BBS'\nTowers['X'] = Towers.geometry.x\nTowers['Y'] = Towers.geometry.y\n\nBurn = gpd.read_file('BB_Data/Spatial/SeedlingRemoval.shp')\n\nChambers = gpd.read_file('BB_Data/Spatial/Chamber_Sites_2016_Burn_Zone.shp')\nfor eco_type in BBECA['MAP_UNIT'].unique():\n    unit = BBECA.loc[BBECA['MAP_UNIT']==eco_type].dissolve().geometry[0]\n    Chambers.loc[Chambers.geometry.intersects(unit)==True,'Unit'] = eco_type.replace(\n        'Pine Sphagnum ','').replace('Low Sh','Low Shurb').replace('Tall S','Tall Shurb').replace('Woodla','Woodland')\n\nChambers=Chambers[['geometry','Unit']].copy()\n\nGrid = gpd.read_file('BB_Data/Spatial/SeedlingRemoval.shp')\nGrid.loc[Grid['year_done']!='2024','Treatment']='Seedling Removal'\nGrid.loc[Grid['year_done']=='2024','Treatment']='Control'\nGrid = Grid[['geometry','Treatment']].copy()\nGrid = Grid.dissolve(by='Treatment')\n\nfor i,row in Grid.iterrows():\n    unit = row.geometry\n    Chambers.loc[Chambers.geometry.intersects(unit)==True,'Treatment'] = i\n    Chambers.loc[Chambers.geometry.intersects(unit)==True,'Zone'] = 2016\n    \nChambers['Treatment']=Chambers['Treatment'].fillna('Control')\nChambers['Zone']=Chambers['Zone'].fillna(2005)\n\nChambers.loc[Chambers['Treatment']=='Seedling Removal','marker']='^'\nChambers.loc[Chambers['Treatment']=='Control','marker']='v'\n\nChambers['geometry'] = Chambers.buffer(50)\nChambers = Chambers.dissolve(by=['Unit','Treatment','Zone'])\n\nChambers['geometry']=Chambers.geometry.centroid\n\n\nEco = BBECA[['Class','AREA_sqKM','geometry']].dissolve(by='Class',aggfunc='sum')\nEco['Pct']=Eco['AREA_sqKM']/Eco['AREA_sqKM'].sum()\nEco = Eco.sort_values(by='Pct')\nEco.to_file('BB_Data/Ecosystem_Summary.shp')\n\nfor key,color in Colors.items():\n    Eco.loc[Eco.index==key,'Color']=color\n\nChambers = Chambers.reset_index()\n\n\nfig = plt.figure(figsize=(10,7))\ngs = gridspec.GridSpec(100, 100)\nbar=fig.add_subplot(gs[7:93, 0:20])\nmap=fig.add_subplot(gs[0:, 21:])\nClass_Patches = []\nbar_ylbl = []\nbar_ytick = []\nfor index,row in Eco.iterrows():\n    kwargs = {\n        'facecolor':row['Color'],\n        'linewidth':.5,\n        'edgecolor':'#646669'\n        }\n    Eco.loc[Eco.index==index].plot(ax=map,**kwargs)\n    bar.barh(index,row['AREA_sqKM'],\n             **kwargs)\nbar.grid(axis='x')\nbar.set_xlabel('Area (km$^2$)')\nbar.set_title('Ecosystems')\n\nkwargs = {\n    'marker':'s',\n    'facecolor':'r',\n    'edgecolor':'k',\n    's':50\n    }\n\nlabel_pad = 45\n\nBB = Towers.loc[Towers['Name']!='BBS']\nmap.scatter(BB['X'],BB['Y'],\n           label='Long-Term',\n           **kwargs)\nfor i,row in BB.iterrows():\n    map.text(row['X']+label_pad,row['Y']+label_pad,f'est. {int(row.Start)}',color='white')\n\nkwargs['marker'] = 'o'\nBBS = Towers.loc[Towers['Name']=='BBS']\nmap.scatter(BBS['X'],BBS['Y'],\n           label='Mobile',\n           **kwargs)\nfor i,row in BBS.iterrows():\n    map.text(row['X']+label_pad,row['Y']+label_pad,f'est. *2023',color='white')\n\nkwargs['facecolor'] ='white'\nfor treat in Chambers['Treatment'].unique():\n    row = Chambers.loc[((Chambers['Zone']==2016)&(Chambers['Treatment']==treat))]\n    kwargs['marker'] = row['marker'].iloc[0]\n    # kwargs['facecolor'] = row['color']\n    map.scatter(row.geometry.x,row.geometry.y,\n           label=treat,\n           **kwargs)\n\nhandles, labels = map.get_legend_handles_labels()\nhandles.insert(0,'Flux Towers')\nlabels.insert(0,'')\n\nhandles.insert(3,'Chamber Plots')\nlabels.insert(3,'')\nmap.legend(handles=(handles),labels=(labels),loc=4,\n           handler_map={str: mel.LegendTitle({'fontsize': 14})})\nmap.get_xaxis().set_visible(False)\nmap.get_yaxis().set_visible(False)\nmap.set_title('Burns Bog Ecological Conservancy Area')\n\n\ncx.add_basemap(map,source=cx.providers.OpenStreetMap.Mapnik, crs=BBS.crs)#, zoom=11)\nplt.savefig('images/EcosystemMap.png',dpi=600)\n\n\nBoundary = BBECA.dissolve()\n\nScale = 27500\n\nfig,ax=plt.subplots(figsize=(5,5))\n\naccess_token='pk.eyJ1IjoidWJjbWljcm9tZXQiLCJhIjoiY2xmMnJzYzlnMGFsYTNxcW1kYWhubjBiaSJ9.rhIOVatxQoS4M__qIFv6Pg'\n\ntileurl = 'https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}@2x.png?access_token=' + str(access_token)\n\nBoundary.plot(ax=ax,facecolor='None',edgecolor='yellow')\nxl = ax.get_xlim()\nyl = ax.get_ylim()\n\naspect = ((xl[0]-xl[1])/(yl[0]-yl[1]))\n\nax.set_ylim(yl[0]-Scale,yl[1]+Scale)\nax.set_xlim(xl[0]-Scale*aspect,xl[1]+Scale*aspect)\n\ncx.add_basemap(ax,source=tileurl, crs=Boundary.crs, zoom=12)\n\nax.get_xaxis().set_visible(False)\nax.get_yaxis().set_visible(False)\n\nplt.tight_layout()\nplt.savefig('images/Basemap.png',dpi=600)\n\n\n\n\n\nimport rasterio as rio\nimport numpy as np\nfrom rasterio.plot import show\nfrom rasterio.warp import calculate_default_transform, reproject, Resampling\npath = \"/mnt/g/My Drive/earthengine/\"\nname = \"S2_Summer_Composite.tif\"\nnew_name = \"S2_Summer_Composite_projected.tif\"\n\n\nBBECA.crs\n\n\ndst_crs = 'EPSG:26910'\n\nProjected_Image = 'temp/FI_Projected.tif'\n\nwith rio.open(path+name) as src:\n    transform, width, height = calculate_default_transform(\n        src.crs, dst_crs, src.width, src.height, *src.bounds)\n    kwargs = src.meta.copy()\n    kwargs.update({\n        'crs': dst_crs,\n        'transform': transform,\n        'width': width,\n        'height': height\n    })\n\n    with rio.open(Projected_Image, 'w', **kwargs) as dst:\n        for i in range(1, src.count + 1):\n            # clip = pct_clip(rio.band(src, i))\n            reproject(\n                source=rio.band(src, i),\n                destination=rio.band(dst, i),\n                src_transform=src.transform,\n                src_crs=src.crs,\n                dst_transform=transform,\n                dst_crs=dst_crs,\n                resampling=Resampling.nearest)\n\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nECC = pd.read_csv('BB_Data/DELTA BURNS BOG.csv',parse_dates=['LOCAL_DATE'],low_memory=False)\nECC = ECC.set_index('LOCAL_DATE')\nECC_m = ECC[['TEMP']].groupby(ECC.index.month).mean()\nECC_ym = ECC[['PRECIP_AMOUNT']].resample('m').sum()\nECC_m['PRECIP_AMOUNT'] = ECC_ym.groupby(ECC_ym.index.month).mean()\n\nkwargs = {'color':'red','edgecolor':'k'}\n\nfig,ax=plt.subplots(2,figsize=(7,7),sharex=True)\nax[0].bar(ECC_m.index,ECC_m['TEMP'],**kwargs)\nax[0].grid()\nax[0].set_ylabel('$\\circ C$')\nax[0].set_title('Air Temperature',loc='left')\n\nkwargs['color']='blue'\nax[1].bar(ECC_m.index,ECC_m['PRECIP_AMOUNT'],**kwargs)\nax[1].grid()\nax[1].set_xticklabels(['','Feb','Apr','Jun','Aug','Oct','Dec'])\nax[1].set_ylabel('mm')\nax[1].set_title('Precipitation',loc='left')\n\nplt.tight_layout()\nplt.savefig('images/Climatology.png',dpi=600)\n\n/tmp/ipykernel_4841/2634464067.py:21: UserWarning: FixedFormatter should only be used together with FixedLocator\n  ax[1].set_xticklabels(['','Feb','Apr','Jun','Aug','Oct','Dec'])\n\n\n\n\n\n\nDbase ="
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About the Burns Bog Ecological Conservancy",
    "section": "",
    "text": "The Burns Bog Ecological Conservancy Area (BBECA) in Delta, Canada protects the largest raised peat bog on the West Coast. After decades of peat harvesting, the BBECA was established in 2005 with the aim of restoring ecosystem health and enhancing the water and carbon storage capacity of the bog. Water and carbon (CO2 and CH4) flux measurements began in 2014, when the CA-DBB flux tower was installed in a beakrush-sphagnum ecosystem undergoing active restoration via ditch blocking. The CA-DB2 tower was installed in 2019 in a pine-sphagnum-low-shrub ecosystem undergoing passive restoration. Flux chamber and a pore water sampling has also been conducted in the BBECA in recent years, and a temporary flux tower will be installed in a pine-sphagnum-woodland ecosystem for the 2023 summer season. There is a wealth of data available and we are seeking to make the best possible use of it. We are proposing to apply the CLASSIC model to the BBECA in order to help Metro Vancouver determine the best management practices for the BBECA. We seek to estimate water and carbon budgets for the bog in its current state and test the potential efficacy of future restoration strategies such as dike construction and seedling removal."
  },
  {
    "objectID": "index.html#where-is-the-bbeca",
    "href": "index.html#where-is-the-bbeca",
    "title": "About the Burns Bog Ecological Conservancy",
    "section": "Where is the BBECA?",
    "text": "Where is the BBECA?\n\n\n<p>\nYour browser does not support iframes.\n</p>\n<p>"
  },
  {
    "objectID": "index.html#publications",
    "href": "index.html#publications",
    "title": "About the Burns Bog Ecological Conservancy",
    "section": "Publications",
    "text": "Publications\n\n\nSatriawan (2022)\nExler & Moore (2022)\nNyberg et al. (2022)\nLee et al. (2022)\nHowie et al. (2020)\nLee (2020)\nD′Acunha et al. (2019)\nLee et al. (2017)\nChristen et al. (2016)\n\n\n\n\nExler, J. L., & Moore, R. D. (2022). Quantifying throughfall, stemflow and interception loss in five vegetation communities in a maritime raised bog. Agricultural and Forest Meteorology, 327, 109202. https://doi.org/10.1016/j.agrformet.2022.109202\n\n\nLee, S.-C., Knox, S. H., McKendry, I., & Black, T. A. (2022). Biogeochemical and biophysical responses to episodes of wildfire smoke from natural ecosystems in southwestern British Columbia, Canada. Atmospheric Chemistry and Physics, 22(4), 2333–2349. https://doi.org/10.5194/acp-22-2333-2022\n\n\nNyberg, M., Black, T. A., Ketler, R., Lee, S.-C., Johnson, M., Merkens, M., et al. (2022). Impacts of Active Versus Passive Re-Wetting on the Carbon Balance of a Previously Drained Bog. Journal of Geophysical Research: Biogeosciences, 127(9), e2022JG006881. https://doi.org/10.1029/2022JG006881\n\n\nSatriawan, T. (2022). Interannual variability of carbon dioxide (CO₂) and methane (CH₄) fluxes in a temperate bog over a 5-year period (Master’s thesis). University of British Columbia. https://doi.org/10.14288/1.0416306\n\n\nHowie, S. A., Whitfield, P. H., & Moore, R. D. (2020). Plant community type is an indicator of the seasonal moisture deficit in a disturbed raised bog. Ecohydrology, 13(4), e2209. https://doi.org/10.1002/eco.2209\n\n\nLee, S.-C. (2020). Applying different partitioning and modelling approaches to investigate the effects of nitrogen fertilization and light inhibition on net ecosystem exchange using long-term eddy-covariance data (PhD thesis). University of British Columbia. https://doi.org/10.14288/1.0392866\n\n\nD′Acunha, B., Morillas, L., Black, T. A., Christen, A., & Johnson, M. S. (2019). Net Ecosystem Carbon Balance of a Peat Bog Undergoing Restoration: Integrating CO2 and CH4 Fluxes From Eddy Covariance and Aquatic Evasion With DOC Drainage Fluxes. Journal of Geophysical Research: Biogeosciences, 124(4), 884–901. https://doi.org/10.1029/2019JG005123\n\n\nLee, S.-C., Christen, A., Black, A. T., Johnson, M. S., Jassal, R. S., Ketler, R., et al. (2017). Annual greenhouse gas budget for a bog ecosystem undergoing restoration by rewetting. Biogeosciences, 14(11), 2799–2814.\n\n\nChristen, A., Jassal, R. S., Black, T. A., Grant, N. J., Hawthorne, I., Johnson, M. S., et al. (2016). Summertime greenhouse gas fluxes from an urban bog undergoing restoration through rewetting. Mires & Peat, 17."
  },
  {
    "objectID": "BBECA_Work.html#introduction",
    "href": "BBECA_Work.html#introduction",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "Introduction",
    "text": "Introduction\n\n\nBurns Bog is a raised ombrotrophic peatland in the Fraser River Delta.\n\nBBECA created in 2005\n\nPromote peat growth, increase water retention, & minimize/reverse C loss\n\n50+ years of peat removal\n\nRestoration practices include:\n\nDitch blocking & seedling removal\n\n\n\n\nBBECA in Delta, BC.\n\n <!-- <p>Your browser does not support iframes.</p> -->"
  },
  {
    "objectID": "BBECA_Work.html#climatology",
    "href": "BBECA_Work.html#climatology",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "Climatology",
    "text": "Climatology\n\n\nUniquely situated in a Mediterranean climate\n\nVulnerable to:\n\nHeatwaves and droughts\n\nFires\n\nIntense winter precipitation\n\n\n\nMonthly climate data from the BBECA Environment Canada weather station"
  },
  {
    "objectID": "BBECA_Work.html#ecosystems-of-the-bbeca",
    "href": "BBECA_Work.html#ecosystems-of-the-bbeca",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "Ecosystems of the BBECA",
    "text": "Ecosystems of the BBECA"
  },
  {
    "objectID": "BBECA_Work.html#bb1",
    "href": "BBECA_Work.html#bb1",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "BB1",
    "text": "BB1\n\n\nBeakrush-sphagnum ecosystem undergoing active restoration with an EC station established in 2015.\n\nHarvested from 1957 to 1963\n\nRewetting (ditch-blocking) began in 2007\n\nNet-neutral C fluxes (2016 - 2021)\n\nCO2 uptake offset by CH4 emissions\n\nPositive Radiative Balance\n\nSignificant inter-annual variability"
  },
  {
    "objectID": "BBECA_Work.html#bb2",
    "href": "BBECA_Work.html#bb2",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "BB2",
    "text": "BB2\n\n\nBeakrush-sphagnum/pine-sphagnum ecosystem with an EC station established in 2019.\n\nHarvested from 1930 to 1948\n\nRewetting by passive means\n\nNet C source (2020)\n\nNet CO2 emission\nLower CH4 emission than BB1"
  },
  {
    "objectID": "BBECA_Work.html#bbs",
    "href": "BBECA_Work.html#bbs",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "BBS",
    "text": "BBS\n\n\nPine-sphagnum ecosystem burned by wildfire in 2015.\n\nPost-fire pine seedling germination\n\n2006 fire > in dense pine stand > halted peat development\nSeedling removal initiated in 2019\n\nChamber experiment assessing impacts of removal on respiration\nMobile flux tower will be installed in seedling area"
  },
  {
    "objectID": "BBECA_Work.html#modelling-fluxes",
    "href": "BBECA_Work.html#modelling-fluxes",
    "title": "Ongoing and Proposed Research in the Burns Bog Ecological Conservancy Area",
    "section": "Modelling Fluxes",
    "text": "Modelling Fluxes\nModeling fluxes in a changing climate\nDeveloping a model to estimate potential future ranges of C fluxes for MetroVancouver"
  }
]